<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integration Validation Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .header {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .dashboard {
            padding: 40px;
        }

        .overview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .overview-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid #e5e7eb;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .overview-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 16px;
        }

        .card-icon {
            font-size: 24px;
            margin-right: 12px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #1f2937;
        }

        .card-status {
            font-size: 14px;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 500;
            margin-bottom: 12px;
            display: inline-block;
        }

        .status-success {
            background: #dcfce7;
            color: #166534;
        }

        .status-warning {
            background: #fef3c7;
            color: #92400e;
        }

        .status-error {
            background: #fee2e2;
            color: #991b1b;
        }

        .status-unknown {
            background: #f3f4f6;
            color: #374151;
        }

        .card-details {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.5;
        }

        .validation-section {
            background: white;
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #f3f4f6;
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            color: #1f2937;
        }

        .validate-btn {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 12px 28px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 16px;
        }

        .validate-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }

        .validate-btn:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .results-container {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #e2e8f0;
            display: none;
        }

        .results-container.show {
            display: block;
        }

        .results-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 20px;
        }

        .results-score {
            font-size: 32px;
            font-weight: 700;
            color: #1f2937;
        }

        .results-status {
            font-size: 18px;
            font-weight: 600;
            padding: 8px 16px;
            border-radius: 8px;
            margin-left: 20px;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .test-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: white;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
        }

        .test-icon {
            font-size: 18px;
            margin-right: 12px;
            min-width: 24px;
        }

        .test-name {
            font-weight: 500;
            color: #374151;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-radius: 50%;
            border-top-color: #10b981;
            animation: spin 1s ease-in-out infinite;
            margin-right: 12px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-list {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 8px;
            padding: 16px;
            margin-top: 16px;
        }

        .error-list h4 {
            color: #dc2626;
            font-size: 16px;
            margin-bottom: 8px;
        }

        .error-list ul {
            list-style: none;
        }

        .error-list li {
            color: #991b1b;
            font-size: 14px;
            margin-bottom: 4px;
            padding-left: 20px;
            position: relative;
        }

        .error-list li::before {
            content: "‚ùå";
            position: absolute;
            left: 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin: 16px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981 0%, #059669 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .export-section {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #e5e7eb;
            margin-top: 30px;
        }

        .export-btn {
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            color: white;
            border: none;
            padding: 10px 24px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            margin: 0 8px;
            transition: all 0.2s ease;
        }

        .export-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 16px rgba(99, 102, 241, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Integration Validation Dashboard</h1>
            <p>Comprehensive testing and verification for Webflow 3D integration</p>
        </div>

        <div class="dashboard">
            <!-- Overview Cards -->
            <div class="overview-grid">
                <div class="overview-card" id="dev-overview">
                    <div class="card-header">
                        <div class="card-icon">üîß</div>
                        <div class="card-title">Development</div>
                    </div>
                    <div class="card-status status-unknown">Not Tested</div>
                    <div class="card-details">Local development server, API endpoints, and test interface</div>
                </div>

                <div class="overview-card" id="prod-overview">
                    <div class="card-header">
                        <div class="card-icon">üöÄ</div>
                        <div class="card-title">Production</div>
                    </div>
                    <div class="card-status status-unknown">Not Tested</div>
                    <div class="card-details">GitHub Pages deployment, scripts, and configurations</div>
                </div>

                <div class="overview-card" id="webflow-overview">
                    <div class="card-header">
                        <div class="card-icon">üåê</div>
                        <div class="card-title">Webflow</div>
                    </div>
                    <div class="card-status status-unknown">Not Tested</div>
                    <div class="card-details">Embed code, hot-reload, and integration features</div>
                </div>

                <div class="overview-card" id="github-overview">
                    <div class="card-header">
                        <div class="card-icon">‚öôÔ∏è</div>
                        <div class="card-title">GitHub Pipeline</div>
                    </div>
                    <div class="card-status status-unknown">Not Tested</div>
                    <div class="card-details">Workflows, build process, and deployment pipeline</div>
                </div>
            </div>

            <!-- Main Validation Section -->
            <div class="validation-section">
                <div class="section-header">
                    <h2 class="section-title">Comprehensive Validation</h2>
                    <button class="validate-btn" id="run-validation" onclick="runValidation()">
                        üß™ Run Full Validation
                    </button>
                </div>

                <p style="color: #6b7280; margin-bottom: 20px;">
                    This validation tests the complete integration workflow from development to production deployment.
                    It verifies API endpoints, GitHub Pages deployment, Webflow embed code, and end-to-end functionality.
                </p>

                <div id="validation-progress" class="progress-bar" style="display: none;">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>

                <div class="results-container" id="results-container">
                    <div class="results-header">
                        <div>
                            <div class="results-score" id="results-score">--/--</div>
                            <div style="color: #6b7280; font-size: 14px;">Tests Passed</div>
                        </div>
                        <div class="results-status" id="results-status">Ready to Test</div>
                    </div>

                    <div class="test-grid" id="test-results"></div>

                    <div id="error-section"></div>

                    <div class="export-section">
                        <button class="export-btn" onclick="exportResults()">üìä Export Report</button>
                        <button class="export-btn" onclick="copyResults()">üìã Copy Results</button>
                        <button class="export-btn" onclick="printResults()">üñ®Ô∏è Print Report</button>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="validation-section">
                <div class="section-header">
                    <h2 class="section-title">Quick Actions</h2>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                    <button class="validate-btn" onclick="testDevelopment()" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                        üîß Test Development
                    </button>
                    <button class="validate-btn" onclick="testProduction()" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                        üöÄ Test Production
                    </button>
                    <button class="validate-btn" onclick="testWebflow()" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">
                        üåê Test Webflow
                    </button>
                    <button class="validate-btn" onclick="testPipeline()" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                        ‚öôÔ∏è Test Pipeline
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Load the validator -->
    <script src="/integration-validator.js"></script>
    
    <script>
        let validationResults = null;
        let currentValidator = null;

        async function runValidation() {
            const button = document.getElementById('run-validation');
            const progressBar = document.getElementById('validation-progress');
            const progressFill = document.getElementById('progress-fill');
            const resultsContainer = document.getElementById('results-container');
            
            button.disabled = true;
            button.innerHTML = '<div class="loading-spinner"></div>Running Validation...';
            progressBar.style.display = 'block';
            resultsContainer.classList.remove('show');
            
            try {
                currentValidator = new WebflowIntegrationValidator();
                
                // Simulate progress updates
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += Math.random() * 15;
                    if (progress > 90) progress = 90;
                    progressFill.style.width = progress + '%';
                }, 200);
                
                validationResults = await currentValidator.validateComplete();
                
                clearInterval(progressInterval);
                progressFill.style.width = '100%';
                
                setTimeout(() => {
                    displayResults(validationResults);
                    updateOverviewCards(validationResults);
                    progressBar.style.display = 'none';
                    resultsContainer.classList.add('show');
                }, 500);
                
            } catch (error) {
                console.error('Validation failed:', error);
                displayError('Validation failed: ' + error.message);
            } finally {
                button.disabled = false;
                button.innerHTML = 'üß™ Run Full Validation';
            }
        }

        function displayResults(results) {
            const { passed, total, errors } = results.overall;
            const successRate = ((passed / total) * 100).toFixed(1);
            
            // Update score
            document.getElementById('results-score').textContent = `${passed}/${total}`;
            
            // Update status
            const statusElement = document.getElementById('results-status');
            if (passed === total) {
                statusElement.textContent = 'üéâ All Systems Go';
                statusElement.className = 'results-status status-success';
            } else if (passed > total * 0.8) {
                statusElement.textContent = '‚ö†Ô∏è Mostly Ready';
                statusElement.className = 'results-status status-warning';
            } else {
                statusElement.textContent = '‚ùå Needs Attention';
                statusElement.className = 'results-status status-error';
            }
            
            // Display test results
            displayTestResults(results);
            
            // Display errors if any
            if (errors.length > 0) {
                displayErrors(errors);
            }
        }

        function displayTestResults(results) {
            const container = document.getElementById('test-results');
            container.innerHTML = '';
            
            const testCategories = [
                { name: 'Development', data: results.development, icon: 'üîß' },
                { name: 'Production', data: results.production, icon: 'üöÄ' },
                { name: 'Webflow', data: results.webflow, icon: 'üåê' },
                { name: 'GitHub', data: results.github, icon: '‚öôÔ∏è' }
            ];
            
            testCategories.forEach(category => {
                if (category.data) {
                    Object.entries(category.data).forEach(([key, value]) => {
                        if (typeof value === 'boolean') {
                            const testItem = document.createElement('div');
                            testItem.className = 'test-item';
                            testItem.innerHTML = `
                                <div class="test-icon">${value ? '‚úÖ' : '‚ùå'}</div>
                                <div class="test-name">${category.icon} ${formatTestName(key)}</div>
                            `;
                            container.appendChild(testItem);
                        }
                    });
                }
            });
        }

        function displayErrors(errors) {
            const errorSection = document.getElementById('error-section');
            errorSection.innerHTML = `
                <div class="error-list">
                    <h4>Issues Found:</h4>
                    <ul>
                        ${errors.map(error => `<li>${error}</li>`).join('')}
                    </ul>
                </div>
            `;
        }

        function updateOverviewCards(results) {
            const cards = {
                'dev-overview': results.development,
                'prod-overview': results.production,
                'webflow-overview': results.webflow,
                'github-overview': results.github
            };
            
            Object.entries(cards).forEach(([cardId, data]) => {
                const card = document.getElementById(cardId);
                const statusElement = card.querySelector('.card-status');
                
                if (data) {
                    const values = Object.values(data).filter(v => typeof v === 'boolean');
                    const passed = values.filter(Boolean).length;
                    const total = values.length;
                    
                    if (total === 0) {
                        statusElement.textContent = 'No Tests';
                        statusElement.className = 'card-status status-unknown';
                    } else if (passed === total) {
                        statusElement.textContent = 'All Good ‚úÖ';
                        statusElement.className = 'card-status status-success';
                    } else if (passed > total * 0.7) {
                        statusElement.textContent = `Mostly Good (${passed}/${total})`;
                        statusElement.className = 'card-status status-warning';
                    } else {
                        statusElement.textContent = `Issues (${passed}/${total})`;
                        statusElement.className = 'card-status status-error';
                    }
                }
            });
        }

        function formatTestName(key) {
            return key.replace(/([A-Z])/g, ' $1')
                     .replace(/^./, str => str.toUpperCase())
                     .replace(/([a-z])([A-Z])/g, '$1 $2');
        }

        function displayError(message) {
            const errorSection = document.getElementById('error-section');
            errorSection.innerHTML = `
                <div class="error-list">
                    <h4>Validation Error:</h4>
                    <ul><li>${message}</li></ul>
                </div>
            `;
            document.getElementById('results-container').classList.add('show');
        }

        // Quick action functions
        async function testDevelopment() {
            console.log('Testing development environment...');
            // Implementation would call specific validation methods
        }

        async function testProduction() {
            console.log('Testing production deployment...');
        }

        async function testWebflow() {
            console.log('Testing Webflow integration...');
        }

        async function testPipeline() {
            console.log('Testing GitHub pipeline...');
        }

        // Export functions
        function exportResults() {
            if (!validationResults) {
                alert('No validation results to export. Run validation first.');
                return;
            }
            
            const exportData = currentValidator.exportResults();
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `integration-validation-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function copyResults() {
            if (!validationResults) {
                alert('No validation results to copy. Run validation first.');
                return;
            }
            
            const { passed, total } = validationResults.overall;
            const successRate = ((passed / total) * 100).toFixed(1);
            const status = passed === total ? 'ALL SYSTEMS GO' : passed > total * 0.8 ? 'MOSTLY READY' : 'NEEDS ATTENTION';
            
            const report = `
Integration Validation Report
============================
Date: ${new Date().toLocaleDateString()}
Score: ${passed}/${total} (${successRate}%)
Status: ${status}

Component Status:
- Development: ${getComponentStatusText(validationResults.development)}
- Production: ${getComponentStatusText(validationResults.production)}
- Webflow: ${getComponentStatusText(validationResults.webflow)}
- GitHub: ${getComponentStatusText(validationResults.github)}
            `.trim();
            
            navigator.clipboard.writeText(report).then(() => {
                alert('Results copied to clipboard!');
            }).catch(() => {
                alert('Failed to copy results to clipboard.');
            });
        }

        function printResults() {
            if (!validationResults) {
                alert('No validation results to print. Run validation first.');
                return;
            }
            window.print();
        }

        function getComponentStatusText(component) {
            if (!component) return 'Unknown';
            const values = Object.values(component).filter(v => typeof v === 'boolean');
            const passed = values.filter(Boolean).length;
            const total = values.length;
            if (total === 0) return 'No tests';
            if (passed === total) return 'All Good';
            if (passed > total * 0.7) return 'Mostly Good';
            return 'Issues';
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üîç Integration Validation Dashboard loaded');
            console.log('Click "Run Full Validation" to start comprehensive testing');
        });
    </script>
</body>
</html>